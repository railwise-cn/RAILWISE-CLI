# 把 AI 测绘项目组装进口袋：在手机上运行 RAILWISE-CLI 完整指南

> 宁波睿威工程技术有限公司技术团队

---

你可能想不到，一台闲置的安卓手机，也能跑起一个拥有 7 个 AI 智能体和 19 个专业计算工具的测绘内业系统。

我们团队开发的 RAILWISE-CLI 原本是为桌面终端设计的——macOS、Linux、Windows，接上大屏幕，敲命令行，处理外业数据，出监测日报。但在实际项目中，我们发现了一个真实痛点：**外业现场没有电脑。**

项目经理在基坑边上收到外业队长发来的数据，想快速算一下闭合差是否超限，或者看看今天的沉降趋势有没有异常——掏出笔记本电脑？工地上灰大风大，不太现实。打开手机上的计算器？四等水准限差公式 $\pm20\sqrt{L}$ 可不是按几下就能出来的。

所以我们做了一个实验：**把 RAILWISE-CLI 完整地跑在安卓手机上。**

结果出乎意料地好——不仅能跑，而且响应速度完全可用。更关键的是，RAILWISE-CLI 最近上线了**跨会话记忆系统**：它会自动记住你的项目结构、计算习惯和工作偏好，**用得越多越顺手**——这在手机端尤为重要，因为没人想在小屏幕上每次都从头解释自己的项目背景。

本文将详细记录整个过程，从零开始，一步一步，确保你照着做就能成功。

---

## 一、原理：为什么手机能跑？

先说清楚技术原理，免得觉得玄乎。

RAILWISE-CLI 是一个基于 [Bun](https://bun.sh)（JavaScript 运行时）的命令行程序。它的核心依赖就两样东西：**Bun 运行时**和**网络连接**（用来调用大模型 API）。所有 19 个专业计算工具（平差、坐标转换、轴力计算等）都是纯 TypeScript 代码，在本地执行，不依赖任何 GPU 或特殊硬件。

现在的安卓手机，芯片都是 ARM64 架构（骁龙、天玑、麒麟无一例外），而 Bun 官方从很早就提供了 `linux-arm64` 的预编译二进制包。也就是说，只要我们能在手机上跑起一个 Linux 环境，Bun 就能装，RAILWISE-CLI 就能跑。

那怎么在手机上跑 Linux？答案是 **Termux + proot-distro**。

- **Termux** 是安卓上最成熟的终端模拟器，不需要 Root 权限，装上就是一个迷你 Linux shell
- **proot-distro** 是 Termux 的一个插件，可以在 Termux 内部通过 proot 技术运行完整的 Ubuntu/Debian 系统——同样不需要 Root

整个链路就是：

```
安卓手机 → Termux（终端模拟器）→ proot Ubuntu（完整 Linux）→ Bun（JS 运行时）→ RAILWISE-CLI
```

没有虚拟机，没有 Docker，没有 Root，纯用户态运行。

---

## 二、准备工作

### 2.1 手机要求

- **系统**：Android 10 及以上（更低版本也可能可以，但我们没测过）
- **架构**：ARM64（2020 年以后的手机基本都是）
- **内存**：建议 4GB 以上（RAILWISE-CLI 本身占用不大，但 Ubuntu 环境需要一些内存）
- **存储**：至少预留 2GB 空间（Ubuntu 基础环境约 500MB，Bun + RAILWISE-CLI 约 300MB，再留些余量）
- **网络**：必须能访问外网（需要调用大模型 API；如果用 DeepSeek 等国内模型，只需要能访问国内网络）

**实测机型参考**：我们用红米 Note 12 Turbo（天玑 7200-Ultra / 8GB RAM）和一台闲置的 Pixel 4a 都跑通了，体验流畅。

### 2.2 需要下载的 App

你只需要安装一个 App：**Termux**。

⚠️ **重要提示**：不要从 Google Play 安装 Termux！Google Play 上的版本早已停更，会出各种兼容性问题。

正确的下载渠道：
- GitHub 官方：https://github.com/termux/termux-app/releases
- F-Droid 应用商店：https://f-droid.org/packages/com.termux/

下载对应你手机架构的 APK（绝大多数选 `arm64-v8a` 版本），安装即可。

安装完成后，**务必进入手机设置**，给 Termux 开启以下权限：
- 后台运行 / 自启动（防止系统杀后台）
- 无限制省电策略（防止待机时被冻结）
- 存储权限（可选，如果需要读取手机里的数据文件）

---

## 三、手把手安装

打开 Termux，你会看到一个黑底白字的终端界面。接下来的所有操作都在这个终端里完成。

### 3.1 更新 Termux 并安装基础工具

```bash
# 更新软件源和已安装的包
pkg update -y && pkg upgrade -y

# 安装 proot-distro（用来跑 Ubuntu）和常用工具
pkg install proot-distro git wget -y
```

这一步可能需要 1-2 分钟，取决于网络速度。如果提示选择镜像源，选一个离你近的（国内用户推荐清华或中科大镜像）。

### 3.2 安装 Ubuntu

```bash
# 安装 Ubuntu 24.04
proot-distro install ubuntu

# 登入 Ubuntu 环境
proot-distro login ubuntu
```

执行 `login` 后，你的终端提示符会从 `$` 变成 `root@localhost:~#`——这说明你已经进入了一个完整的 Ubuntu 系统。

在 Ubuntu 里，先做一次更新：

```bash
apt update && apt upgrade -y
```

然后安装必要的依赖：

```bash
apt install curl unzip git ca-certificates -y
```

### 3.3 安装 Bun

Bun 的安装非常简单，官方提供了一键安装脚本：

```bash
curl -fsSL https://bun.sh/install | bash
```

安装完成后，刷新环境变量：

```bash
source ~/.bashrc
```

验证安装：

```bash
bun --version
```

如果输出了版本号（如 `1.3.x`），说明 Bun 安装成功。

> 💡 **如果安装失败**：少数手机可能会遇到 `SystemError 13` 错误，这是 Android 10+ 的隐私保护机制导致的。解决方法是在 Termux（注意不是 Ubuntu 里）执行：
> ```bash
> # 退出 Ubuntu 回到 Termux
> exit
> # 用以下方式重新登入，绕过网络限制
> proot-distro login ubuntu --bind /dev/net/tun:/dev/net/tun
> ```

### 3.4 克隆并运行 RAILWISE-CLI

```bash
# 克隆项目
git clone https://github.com/railwise-cn/RAILWISE-CLI.git
cd RAILWISE-CLI

# 安装依赖
bun install

# 启动！
bun run dev
```

第一次 `bun install` 会下载所有依赖包，根据网络情况可能需要 2-5 分钟。之后的每次启动只需要 `bun run dev`，几秒钟就能进入系统。

如果一切顺利，你会看到 RAILWISE-CLI 的启动界面——和电脑上一模一样的多智能体 AI 系统，现在跑在了你的手机上。

---

## 四、配置大模型

RAILWISE-CLI 启动后，需要配置一个大模型 API 才能让智能体工作。

对于手机端使用，我们**强烈推荐使用国内免费模型**，原因很简单：网络稳定、延迟低、不花钱。

### 推荐方案：DeepSeek（注册送 500 万 tokens）

1. 访问 https://platform.deepseek.com 注册账号
2. 在"API Keys"页面创建一个密钥
3. 在 RAILWISE-CLI 中配置：

进入系统后，按下快捷键打开设置界面，选择模型提供商为 DeepSeek，填入你的 API Key 即可。

### 其他免费选择

| 模型 | 免费额度 | 备注 |
|------|---------|------|
| 智谱 GLM | 永久免费 | 国产大模型，中文表现优秀 |
| DeepSeek | 注册送 500 万 tokens | 性价比极高 |
| MiniMax | 有免费额度 | 适合轻量使用 |
| Kimi（月之暗面） | 有免费额度 | 长上下文能力强 |

这些模型全部走国内网络，在手机上响应速度很快，通常 2-3 秒内就能开始输出。

---

## 五、实际使用体验

### 5.1 日常场景

配置好模型后，你就可以像在电脑上一样使用 RAILWISE-CLI 的全部功能了。几个典型的外业现场场景：

**场景 1：现场快速校核闭合差**

外业队长刚跑完一条水准路线，在手机上打开 RAILWISE-CLI：

> "帮我算一下，四等水准，路线长 3.2 公里，实测闭合差 28 毫米，过不过？"

系统 2 秒内给出结果：限差 ±35.78mm，实测 28mm < 35.78mm，**合格**。

不用翻规范、不用按计算器、不用查公式。

**场景 2：查看今日监测趋势**

项目经理收到自动化监测系统推送的 CSV 数据：

> "分析一下今天的沉降数据，看看有没有异常。"

`data_analyst` 智能体调用 `monitoring_csv` 工具处理数据，`deformation_rate` 计算变形速率，几秒后输出分析结论和预警信息。

**场景 3：查阅规范条文**

在甲方会议上，被问到"GB 50911 对建筑物沉降监测频率是怎么规定的"——直接在手机上问：

> "查一下 GB 50911 关于施工影响区域内建筑物沉降监测频率的规定。"

`standard_query` 工具秒查条文原文返回。

**场景 4：越用越懂你的项目**

第一次在手机上打开 RAILWISE-CLI，你可能需要告诉它"我们这个项目是四等水准，用的 CGCS2000 坐标系"。但第二次、第三次，你不用再说了——系统的**跨会话记忆**已经自动记住了这些信息。

> "分析一下今天的沉降数据。"

它不会再问你"什么等级的监测？预警值是多少？"，因为上次对话中你提到过的项目参数、报警阈值、报告格式偏好，都已经变成了它的"长期记忆"。用得越久，交互越精简，就像一个真正磨合过的搭档。

这在手机端的体验提升格外明显——屏幕小、打字慢，每少打一句话都是实打实的效率提升。

### 5.2 输入效率优化

在手机终端上打字确实不如电脑键盘快。这里分享几个提高效率的技巧：

**蓝牙键盘**：如果经常在外使用，配一个折叠蓝牙键盘，体验直接起飞。实测罗技 K380 配合 RAILWISE-CLI 非常顺手。

**语音输入**：安卓系统自带的语音输入在 Termux 里可以直接用。切换到语音输入法，说"帮我算一下四等水准路线长三点二公里闭合差二十八毫米"，识别准确率很高。

**常用命令别名**：在 Ubuntu 的 `~/.bashrc` 里设置别名，减少重复输入：

```bash
alias rw='cd ~/RAILWISE-CLI && bun run dev'
```

以后只需要输入 `rw` 两个字母就能启动系统。

**Termux 快捷键**：Termux 支持屏幕左滑呼出扩展键盘，提供 Tab、Ctrl、方向键等常用按键，配合终端操作非常方便。

### 5.3 性能实测

我们在红米 Note 12 Turbo（天玑 7200-Ultra / 8GB RAM）上做了实测：

| 操作 | 耗时 | 备注 |
|------|------|------|
| 冷启动 RAILWISE-CLI | ~4 秒 | 首次 `bun run dev` |
| 水准闭合差校核 | <1 秒 | `survey_calculator` 本地计算 |
| 坐标转换（100 个点） | ~1 秒 | `coord_transform` 本地计算 |
| 处理 CSV 监测数据（5000 行） | ~2 秒 | `monitoring_csv` 本地解析 |
| 生成监测日报（含模型调用） | 8-15 秒 | 主要是等待模型 API 响应 |
| 导出 Excel 报表 | <1 秒 | `excel_export` 本地生成 |

可以看到，所有本地计算几乎是瞬时完成的（毕竟现在手机芯片的性能已经追上几年前的桌面 CPU 了）。唯一的等待时间来自大模型 API 的网络请求，这和用电脑是一样的。

---

## 六、进阶：让手机变成"随身服务器"

如果你愿意再折腾一点，还可以把手机变成一台 24 小时在线的 RAILWISE-CLI 服务器。

### 6.1 保持后台运行

Termux 默认在退出后会被安卓系统回收。要保持常驻：

1. 从 Termux 顶部下拉通知栏，点击 Termux 的通知，选择"Acquire Wakelock"
2. 在手机设置中将 Termux 锁定在最近任务列表中（长按卡片→锁定）
3. 关闭 Termux 的电池优化

### 6.2 SSH 远程连接

在 Ubuntu 环境中安装 SSH 服务器，就可以从电脑远程连接手机上的 RAILWISE-CLI：

```bash
# 在 Termux 中（不是 Ubuntu 里）
pkg install openssh
sshd
```

然后从电脑上：

```bash
ssh -p 8022 手机IP地址
```

连上之后进入 Ubuntu、启动 RAILWISE-CLI，你就可以在电脑的大屏幕上操作手机里跑着的系统了——手机只是算力载体，交互在电脑上完成。

这个方案特别适合一种场景：**办公室里有一台闲置旧手机，插上充电器挂在角落，当作一台免费的 ARM 服务器用。**

---

## 七、常见问题

**Q：需要 Root 吗？**
A：完全不需要。Termux 和 proot-distro 都是用户态运行的，不涉及任何系统级修改。

**Q：iPhone 能跑吗？**
A：很遗憾，不能。iOS 不允许安装终端模拟器或运行第三方运行时环境。这是安卓的独有优势。

**Q：耗电严重吗？**
A：待机状态几乎不耗电。执行计算任务时，功耗和玩一个轻量级手游差不多。实测连续使用 1 小时约消耗 8%-12% 电量（4500mAh 电池）。

**Q：能处理大文件吗？**
A：可以，但有限制。手机内存通常是 6-12GB，建议单次处理的数据文件不超过 100MB。日常的监测数据 CSV（几千到几万行）完全没问题。

**Q：更新 RAILWISE-CLI 怎么操作？**
A：和电脑上一样：

```bash
cd ~/RAILWISE-CLI
git pull
bun install
```

**Q：Termux 里中文显示乱码怎么办？**
A：安装中文字体包：

```bash
# 在 Termux 中
pkg install fontconfig
# 在 Ubuntu 中
apt install fonts-wqy-zenhei -y
```

---

## 八、写在最后

让 RAILWISE-CLI 跑在手机上，这件事本身并不难——总共就是装 Termux、装 Ubuntu、装 Bun、克隆项目、启动，五步走完。真正让我们兴奋的是它带来的使用场景变化：

测量员站在基坑边上，掏出手机就能校核刚测完的数据；项目经理在赶往甲方的地铁上，就能让 AI 帮他先把监测日报的初稿拉出来；审核人员在工地食堂吃着午饭，手机上收到日报推送，打开 RAILWISE-CLI 让 `qa_reviewer` 跑一遍规范审查。

**工程测绘的内业工作，第一次真正做到了随时随地。**

而且，因为有跨会话记忆，你在手机上的每一次使用都不是孤立的——上午在工地用手机算的闭合差结果、下午在电脑上出的日报模板、晚上在手机上查的规范条文，这些信息都会沉淀为系统的长期记忆，让它越来越懂你的项目。**不是每次都从零开始，而是每次都在上次的基础上更进一步。**

当然，手机端的体验不可能完全替代桌面端——屏幕小、打字慢、不适合长时间高强度操作。但作为桌面端的补充，它覆盖了一个之前完全空白的场景：**在现场、在路上、在任何没有电脑的地方，你依然可以调动一整个 AI 项目组为你工作。**

如果你想试试，现在就可以开始。一台闲置的安卓手机，十分钟的安装时间，零成本。

项目地址：https://github.com/railwise-cn/RAILWISE-CLI

---

*宁波睿威工程技术有限公司（Railwise）专注于工程测绘、结构监测与地铁监测服务。*
