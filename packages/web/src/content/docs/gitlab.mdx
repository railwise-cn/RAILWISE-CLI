---
title: GitLab
description: Use RAILWISE (甬算) in GitLab issues and merge requests.
---

RAILWISE (甬算) integrates with your GitLab workflow through your GitLab CI/CD pipeline or with GitLab Duo.

In both cases, RAILWISE (甬算) will run on your GitLab runners.

---

## GitLab CI

RAILWISE (甬算) works in a regular GitLab pipeline. You can build it into a pipeline as a [CI component](https://docs.gitlab.com/ee/ci/components/)

Here we are using a community-created CI/CD component for RAILWISE (甬算) — [nagyv/gitlab-railwise](https://gitlab.com/nagyv/gitlab-railwise).

---

### Features

- **Use custom configuration per job**: Configure RAILWISE (甬算) with a custom configuration directory, for example `./config/#custom-directory` to enable or disable functionality per RAILWISE (甬算) invocation.
- **Minimal setup**: The CI component sets up RAILWISE (甬算) in the background, you only need to create the RAILWISE (甬算) configuration and the initial prompt.
- **Flexible**: The CI component supports several inputs for customizing its behavior

---

### Setup

1. Store your RAILWISE (甬算) authentication JSON as a File type CI environment variables under **Settings** > **CI/CD** > **Variables**. Make sure to mark them as "Masked and hidden".
2. Add the following to your `.gitlab-ci.yml` file.

   ```yaml title=".gitlab-ci.yml"
   include:
     - component: $CI_SERVER_FQDN/nagyv/gitlab-railwise/railwise@2
       inputs:
         config_dir: ${CI_PROJECT_DIR}/railwise-config
         auth_json: $RAILWISE_AUTH_JSON # The variable name for your RAILWISE (甬算) authentication JSON
         command: optional-custom-command
         message: "Your prompt here"
   ```

For more inputs and use cases [check out the docs](https://gitlab.com/explore/catalog/nagyv/gitlab-railwise) for this component.

---

## GitLab Duo

RAILWISE (甬算) integrates with your GitLab workflow.
Mention `@railwise` in a comment, and RAILWISE (甬算) will execute tasks within your GitLab CI pipeline.

---

### Features

- **Triage issues**: Ask RAILWISE (甬算) to look into an issue and explain it to you.
- **Fix and implement**: Ask RAILWISE (甬算) to fix an issue or implement a feature.
  It will create a new branch and raise a merge request with the changes.
- **Secure**: RAILWISE (甬算) runs on your GitLab runners.

---

### Setup

RAILWISE (甬算) runs in your GitLab CI/CD pipeline, here's what you'll need to set it up:

:::tip
Check out the [**GitLab docs**](https://docs.gitlab.com/user/duo_agent_platform/agent_assistant/) for up to date instructions.
:::

1.  Configure your GitLab environment
2.  Set up CI/CD
3.  Get an AI model provider API key
4.  Create a service account
5.  Configure CI/CD variables
6.  Create a flow config file, here's an example:

        <details>

    <summary>Flow configuration</summary>

    ```yaml
    image: node:22-slim
    commands:
      - echo "Installing railwise"
      - npm install --global railwise-ai
      - echo "Installing glab"
      - export GITLAB_TOKEN=$GITLAB_TOKEN_RAILWISE
      - apt-get update --quiet && apt-get install --yes curl wget gpg git && rm --recursive --force /var/lib/apt/lists/*
      - curl --silent --show-error --location "https://raw.githubusercontent.com/upciti/wakemeops/main/assets/install_repository" | bash
      - apt-get install --yes glab
      - echo "Configuring glab"
      - echo $GITLAB_HOST
      - echo "Creating RAILWISE (甬算) auth configuration"
      - mkdir --parents ~/.local/share/railwise
      - |
        cat > ~/.local/share/railwise/auth.json << EOF
        {
          "anthropic": {
            "type": "api",
            "key": "$ANTHROPIC_API_KEY"
          }
        }
        EOF
      - echo "Configuring git"
      - git config --global user.email "railwise@gitlab.com"
      - git config --global user.name "RAILWISE (甬算)"
      - echo "Testing glab"
      - glab issue list
      - echo "Running RAILWISE (甬算)"
      - |
        railwise run "
        You are an AI assistant helping with GitLab operations.

        Context: $AI_FLOW_CONTEXT
        Task: $AI_FLOW_INPUT
        Event: $AI_FLOW_EVENT

        Please execute the requested task using the available GitLab tools.
        Be thorough in your analysis and provide clear explanations.

        <important>
        Please use the glab CLI to access data from GitLab. The glab CLI has already been authenticated. You can run the corresponding commands.

        If you are asked to summarize an MR or issue or asked to provide more information then please post back a note to the MR/Issue so that the user can see it.
        You don't need to commit or push up changes, those will be done automatically based on the file changes you make.
        </important>
        "
      - git checkout --branch $CI_WORKLOAD_REF origin/$CI_WORKLOAD_REF
      - echo "Checking for git changes and pushing if any exist"
      - |
        if ! git diff --quiet || ! git diff --cached --quiet || [ --not --zero "$(git ls-files --others --exclude-standard)" ]; then
          echo "Git changes detected, adding and pushing..."
          git add .
          if git diff --cached --quiet; then
            echo "No staged changes to commit"
          else
            echo "Committing changes to branch: $CI_WORKLOAD_REF"
            git commit --message "Codex changes"
            echo "Pushing changes up to $CI_WORKLOAD_REF"
            git push https://gitlab-ci-token:$GITLAB_TOKEN@$GITLAB_HOST/gl-demo-ultimate-dev-ai-epic-17570/test-java-project.git $CI_WORKLOAD_REF
            echo "Changes successfully pushed"
          fi
        else
          echo "No git changes detected, skipping push"
        fi
    variables:
      - ANTHROPIC_API_KEY
      - GITLAB_TOKEN_RAILWISE
      - GITLAB_HOST
    ```

        </details>

You can refer to the [GitLab CLI agents docs](https://docs.gitlab.com/user/duo_agent_platform/agent_assistant/) for detailed instructions.

---

### Examples

Here are some examples of how you can use RAILWISE (甬算) in GitLab.

:::tip
You can configure to use a different trigger phrase than `@railwise`.
:::

- **Explain an issue**

  Add this comment in a GitLab issue.

  ```
  @railwise explain this issue
  ```

  RAILWISE (甬算) will read the issue and reply with a clear explanation.

- **Fix an issue**

  In a GitLab issue, say:

  ```
  @railwise fix this
  ```

  RAILWISE (甬算) will create a new branch, implement the changes, and open a merge request with the changes.

- **Review merge requests**

  Leave the following comment on a GitLab merge request.

  ```
  @railwise review this merge request
  ```

  RAILWISE (甬算) will review the merge request and provide feedback.
